
<ion-navbar *navbar><button menuToggle><ion-icon name="menu"></ion-icon></button>
  <ion-title class="padding-right24">ToDo's</ion-title>
</ion-navbar>       
<ion-content>                                                                                                                

    <div class="todos list general-alignment">
        <img *ngIf="busy" class="imglogo img-padding" src="img/loading2.gif"/>
        <div *ngIf="is_empty" class="table grey2 menu-text">No ToDo's yet</div>
        <div class="blue4 alignment-bottom" style="height: 50px;" (click)="hidden = !hidden">
            <span><ion-icon [ngClass]="{'ion-ios-arrow-down font18 margin-top3 margin-right10':!hidden, 'pr8 button-arrow ion-ios-arrow-forward':hidden}" class="left todos-arrow padding-left15 left" role="img"></ion-icon><h5 style="color:white">ToDo's</h5></span>
            <button fab class="right buttonInvoice email-invoice position-initial margin-right10 general-alignment2">{{undone}}</button></div>
                        <block [hidden]="hidden">
         <template ngFor let-todoList [ngForOf]="todoLists | async" let-even="even" let-odd="odd">
         <div (click)="todoList.hidden = !todoList.sub?.length || !todoList.hidden"> 
                <ion-icon [style.visibility]="!todoList.sub?.length ?'hidden':'inherit'" role="img" [ngClass]="{'ion-ios-arrow-down font18  margin-right10':!todoList.hidden, 'pr8 button-arrow ion-ios-arrow-forward left':todoList.hidden}" class="todos-arrow padding-left15"></ion-icon><h5>{{todoList.name}}</h5><ion-icon (click)="AddTodo(todoList.list_id)" name="md-create" role="img" class="ion-md-create padding-left15 todos-arrow right" aria-label="arrow down"></ion-icon>
         </div>

         <template [ngIf]="!todoList?.hidden">
         <template ngFor let-todo [ngForOf]="todoList?.sub" let-last="last" let-even="seven" let-odd="sodd">
         <div (click)="todo.is_completed = !todo.is_completed;setDone(todo)">
            <ion-icon [ngClass]="{'ion-ios-checkmark-circle secondary' : todo.is_completed, 'ion-ios-radio-button-on grey2' : !todo.is_completed}" class="font18 todos-padding margin-top3"></ion-icon><h5 [ngClass]="{'decoration_line grey3_color' : todo.is_completed, '' : !todo.is_completed}">{{todo.title}} <i *ngIf="todo.text">{{" - " + todo.text}}</i></h5><!--ion-icon name="md-create" role="img" class="ion-md-create padding-left15 todos-arrow right" aria-label="arrow down"></ion-icon--></div>
            <div class="todos-flex right">
             <h6></h6> 
                <h6 *ngIf="todo.assigned_name">{{todo.assigned_name}}</h6> 
                <h6 *ngIf="todo.due_date">Due&nbsp;{{setDate(todo.due_date)}}</h6>
                <h6 *ngIf="todo.estimated_remain">{{getFixed(todo.estimated_remain)}}&nbsp;hrs</h6>
            </div>
        <hr *ngIf="!last" class="width_calc100-40"/>
            </template>
            </template>
             <hr class="width100"/>
            </template>
            </block>
         </div>
     </ion-content>

     <button (click)="AddTodo()" secondary item-right fab fab-right fab-bottom style="z-index: 2"><ion-icon class="button_circle action-but" name="md-add"></ion-icon></button>
