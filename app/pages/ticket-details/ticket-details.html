
<ion-navbar *navbar><button menuToggle><ion-icon name="menu"></ion-icon></button>
    
    <ion-title>{{ticket.status}} | <a [href]="getFullapplink(ticket.key)" class="text-decor">{{ticket.number}}&nbsp;<ion-icon class="outline" name="ios-open-outline"></ion-icon></a></ion-title>
</ion-navbar>

<ion-content>
    <div class="subject">
   <ion-item class="itemTech blue3 padding subject-ticket text-left width50 left" no-lines>
       <span class="subject-padding ticket-details">{{ticket.subject}}</span>
           </ion-item>
        <ion-item class="left blue3 width45" no-lines>
        <p class="text-right grey2">{{ticket.class_name}}</p>
        <p *ngIf="'true'" class="text-right">{{ticket.location_name}}</p>
        <p class="text-right grey2">{{getFullName(ticket.technician_firstname || ticket.tech_firstname, ticket.technician_lastname || ticket.tech_lastname,  ticket.technician_email || ticket.tech_email)}}</p>
        <p class="text-right grey2">{{ticket.days_old_in_minutes | Daysold}}</p>
        <p  *ngIf="ticket.misc_cost > 0" class="text-right grey2">Expenses:  {{getCurrency(ticket.misc_cost)}}</p>
        <p *ngIf="ticket.total_hours > 0" class="text-right grey2">{{ticket.total_hours}} Hours</p>
            <p *ngIf="ticket.sla_complete_date != null" class="text-right grey2">SLA: {{setDate(ticket.sla_complete_date) | date: "MM/dd/yyyy HH:mm"}}</p></ion-item>
        
    </div>
    <div class="subject">
        <ion-segment class="tabsTicket"  [(ngModel)]="details_tab">
    <ion-segment-button value="Reply">
      Reply
    </ion-segment-button>
    <ion-segment-button value="Info">
      Info
    </ion-segment-button>
    <ion-segment-button value="Options">
        Options
    </ion-segment-button>
    </ion-segment>
</div>
    <div [ngSwitch]="details_tab">
     <div class="list general-alignment2" *ngSwitchWhen="'Reply'">
         
         <posts-list [posts]="post1" [attachments]="attachments"></posts-list>
         <div class="response-ticket">
        <textarea class="width100 textLogin commentText" type="text" placeholder="Add Response"></textarea>
    <button secondary menuToggle
            class="button_reply">Reply</button></div>
         
         <posts-list [posts]="posts" [attachments]="attachments"></posts-list>
         
        </div>
               
  <div *ngSwitchWhen="'Info'" class="list general-alignment max-width700">
    
      <class-list [list]="selects.class" (onChanged)='saveSelect($event)'></class-list>
    
      <select-list [list]="selects.level" (onChanged)='saveSelect($event)'></select-list>
    
      <select-list [list]="selects.priority" (onChanged)='saveSelect($event)'></select-list>
      
      <select-list [list]="selects.tech" (onChanged)='saveSelect($event)'></select-list>
      
      <select-list [list]="selects.location" (onChanged)='saveSelect($event)'></select-list>
      
      <select-list [list]="selects.project" (onChanged)='saveSelect($event)'></select-list>
    
      <button secondary block (click)="onUpdate()" type="submit" class="img-top disable-hover button button-default button-block">Update</button>
    </div>
    <div *ngSwitchWhen="'Options'" class="list general-alignment max-width700">
      <button secondary block="" type="submit" class="disable-hover button button-default button-block class-margin">Add Time</button>
      <button secondary block="" type="submit" class="disable-hover button button-default button-block general-alignment2 class-margin">Add Expense</button>
  <button block class="general-alignment2 blue2 class-margin">Transfer Ticket</button>
            <button block class="general-alignment2 blue2 class-margin">Close Ticket</button>
                <br>
                
        <select-list [list]="resolution" (onChanged)='saveSelect($event)'></select-list>
        
        <select-list [list]="resolution_category" (onChanged)='saveSelect($event)'></select-list>
            
          <i class="billable">
 <ion-icon class="ion-ios-radio-button-on"></ion-icon>
          </i>
        <p>Confirm Now?</p>
            <br>
          <textarea class="width100 textLogin commentText" type="text" placeholder="Add closing comments"></textarea>
            <button secondary menuToggle
            class="button_reply width35 img-top">Close Ticket</button>
                </div>
    </div>
</ion-content>
